# Vista CDN Client

This is a JavaScript library that creates media asset URLs for the Vista CDN.

## Source Code

<http://tfs:8080/tfs/Vista/Packages.Js/_git/vista-cdn-client>

## Usage

## 1. Create an instance of the Vista CDN Client

Initialise the CdnClient with the base CDN URL and any common options. For example:

```js
const client = new CdnClient('http://cdn', {
    mediaApiToken: 'token',
    referenceScheme: 'HeadOffice',
    ...
});
```

## 2. Create an entity URL builder

The CdnClient includes a URL builder for each entity type supported by the Vista CDN.

Each builder function takes an entity ID and any options common to the entity's assets. For example:

```js
const filmUrlBuilder = client.film('HO00032831', {
    allowPlaceHolder: true,
    fileFormat: 'png|jpg',
    ...
});
```

## 3. Create an asset URL

Each entity URL builder has a number of available asset URL builders. Each asset URL builder function can take a set of options and will return a CDN URL string. For example:

```js
const posterUrl = filmUrlBuilder.poster({
    width: 100,
    height: 50
});

console.log(posterUrl);

// http://cdn/media/entity/get/FilmPosterGraphic/HO00032831?mediaApiToken=token&referenceScheme=HeadOffice&allowPlaceHolder=true&fileFormat=png|jpg&width=100&height=50
```

The asset URL returned will include a combination of:
- Any options passed to the CdnClient constructor.
- Any options passed to the entity URL builder.
- Any options passed to the asset URL builder function.

> **Note:**
>
> Options passed to the CdnClient (excluding `mediaApiToken`) can be overridden in the entity URL builder or asset URL builder functions.
>
> Options passed to the entity URL builder can also be overridden by the asset URL builder function's options.

## Documentation

For information about the supported entities and assets, please refer to the `docs` folder inside the NPM package, or generate an up-to-date version by running `npm run docs` and explore `build/docs` for its contents.
