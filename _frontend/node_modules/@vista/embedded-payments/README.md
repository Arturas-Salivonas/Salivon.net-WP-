# Vista Embedded Payments

This is a JavaScript client library that allows the user to perform payments via third-party embedded payment interfaces.

## Source Code

<http://tfs:8080/tfs/Vista/Packages.Js/_git/vista-embedded-payments>

## Documentation

Please refer to the `docs` folder inside the NPM package, or generate your up-to-date version from source running `npm run docs` and explore `build/docs` for its contents.

## Usage

### 1. Add an empty `<div>` container to the DOM

```html
<div id="container"></div>
```

### 2. Create an instance of the Payment Client

Initialise the PaymentClient with the required parameters. For example:

```js
const container = document.getElementById('container');

const client = new PaymentClient({
    orderId: '[orderId]',
    paymentMethod: '[paymentMethod]',
    container: container,
    paymentButtonConfig: {
        className: 'button',
        loadingClassName: 'button--loading',
        label: 'Pay now'
    },
    childContainerClassName: 'child-container',
    events: {
        onPaymentSuccessful: handlePaymentSuccessful,
        onPaymentFailed: handlePaymentFailed,
    },
    api: {
        startEmbeddedPayment: (orderId, request) => {},
        getOrderCompletionStatus: (orderId) => {}
    }
});
```

### 3. Respond to payment outcomes

When the payment has been completed, either the `onPaymentSuccessful()` or the `onPaymentFailed()` event callback function will be called. Use these callback functions to respond appropriately to the payment outcome.

```js
function handlePaymentSuccessful(orderCompletionStatus) {
    // redirect to order completed page
}

function handlePaymentFailed(error) {
    // show error UI
}
```
