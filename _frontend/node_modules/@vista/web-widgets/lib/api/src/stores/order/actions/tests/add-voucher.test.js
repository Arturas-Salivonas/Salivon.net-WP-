import { exampleVoucherSingleUse } from './../../../../../../example-data/vouchers';
import { orderStoreInstance } from './../../order-store';
import { addVoucher } from './../add-voucher';
describe('addVoucher', function () {
    beforeEach(function () {
        orderStoreInstance.syncToCache = jest.fn();
    });
    afterEach(function () {
        orderStoreInstance.flush();
        jest.resetAllMocks();
    });
    it('adds a voucher to the order store', function () {
        addVoucher(exampleVoucherSingleUse);
        expect(Object.keys(orderStoreInstance.data.order.vouchers).length).toEqual(1);
        expect(orderStoreInstance.syncToCache).toHaveBeenCalledTimes(1);
    });
    it('returns if the voucher has already been added to the order store', function () {
        var _a;
        orderStoreInstance.data.order.vouchers = (_a = {},
            _a[exampleVoucherSingleUse.barcode] = exampleVoucherSingleUse,
            _a);
        addVoucher(exampleVoucherSingleUse);
        expect(Object.keys(orderStoreInstance.data.order.vouchers).length).toEqual(1);
        expect(orderStoreInstance.syncToCache).not.toHaveBeenCalled();
    });
});
//# sourceMappingURL=add-voucher.test.js.map