import { TicketSelectionValidationError } from './../../../../../../types/stores/order-store-data';
import { configurationStoreInstance } from './../../../configuration/configuration-store';
import { orderStoreInstance } from './../../order-store';
import { validateSelectedTicketsForShowtime } from './../validate-selected-tickets-for-showtime';
describe('validateSelectedTicketsForShowtime', function () {
    var isSeatFirstOrderingSpy = jest.spyOn(orderStoreInstance.selectors, 'isSeatFirstOrderingForShowtime');
    beforeEach(function () {
        orderStoreInstance.actions.setTicketSelectionErrors = jest.fn();
    });
    afterEach(function () {
        configurationStoreInstance.flush();
        orderStoreInstance.flush();
        jest.resetAllMocks();
    });
    describe('seat-first ordering mode', function () {
        beforeEach(function () {
            isSeatFirstOrderingSpy.mockReturnValue(true);
        });
        // todo: test seat first ordering mode validation
    });
    describe('ticket-first ordering mode', function () {
        beforeAll(function () {
            isSeatFirstOrderingSpy.mockReturnValue(false);
        });
        it('fails if no tickets have been selected', function () {
            orderStoreInstance.selectors.getSelectedTicketsCountForShowtime = jest.fn().mockReturnValue(0);
            var result = validateSelectedTicketsForShowtime('showtimeId');
            expect(result).toEqual(false);
            expect(orderStoreInstance.actions.setTicketSelectionErrors).toBeCalledWith([TicketSelectionValidationError.NoTicketsSelected]);
        });
        it('succeeds if at least one ticket has been selected', function () {
            orderStoreInstance.selectors.getSelectedTicketsCountForShowtime = jest.fn().mockReturnValue(1);
            var result = validateSelectedTicketsForShowtime('showtimeId');
            expect(result).toEqual(true);
            expect(orderStoreInstance.actions.setTicketSelectionErrors).toBeCalledWith([]);
        });
    });
});
//# sourceMappingURL=validate-selected-tickets-for-showtime.test.js.map