import { action } from 'mobx';
import { orderStoreInstance } from '../order-store';
/**
 * Add or update tickets for a showtime.
 */
export var setTicketTypesForShowtime = action(function (showtimeId, ticketTypes) {
    var showtime = orderStoreInstance.selectors.getShowtimeById(showtimeId);
    var ticketTypeMap = getTicketTypeMap(ticketTypes);
    showtime.ticketTypes = ticketTypeMap;
    showtime.tickets = getFilteredTickets(showtime.tickets, ticketTypeMap);
    orderStoreInstance.syncToCache();
});
function getTicketTypeMap(ticketTypes) {
    return ticketTypes.reduce(function (map, ticketType) {
        return map.set(ticketType.key, ticketType);
    }, new Map());
}
function getFilteredTickets(tickets, ticketTypes) {
    return tickets.filter(function (ticket) { return ticketTypes.has(ticket.ticketTypeKey); });
}
//# sourceMappingURL=set-ticket-types-for-showtime.js.map